# 프롬프트 수정 V5 - 모든 예시 완전 제거

## 문제 상황 (V4 → V5)

### 체스판 문제에서 발생한 문제

**사용자 코드:**
```python
N, M = map(int, input().split())
board = []
for _ in range(N):
    board.append(input())
```

**생성된 힌트 (V4):**
```
📌 Qwen2.5-Coder-1.5B
"이상한 코드를 100번 쓰려고 하는데 어떤 대안을 고민하나요"
```

**문제 원인:**
- 프롬프트의 "질문 방식" 섹션에 예시 제공:
  - "지금 코드를 100번 복사해야 한다면 어떻게 할까?"
  - "이 작업을 나중에 다시 써야 한다면?"
- 모델이 이 예시를 참조해서 비슷한 표현 생성
- 결과: **"이상한 코드를 100번 쓰려고..."** (예시의 변형)

---

## 핵심 수정 사항

### V4 프롬프트 (Before)

```python
질문 원칙:
1. 구체적 이름(함수명, 변수명) 절대 금지
2. 학생의 상황에서 시작하기 (예: "같은 코드를 10번 써야 한다면?")
3. 문제 상황을 제시하고 해결 방법을 스스로 생각하게 만들기

질문 방식:
- "지금 코드를 100번 복사해야 한다면 어떻게 할까?"
- "이 작업을 나중에 다시 써야 한다면?"
- "값이 1000개라면 일일이 비교할 건가?"

한국어 반말로 한 문장:
```

**문제:**
- "질문 방식" 섹션의 구체적 예시를 모델이 그대로 따라함
- 예시가 있으면 모델이 창의적으로 생각하지 않고 복사함

---

### V5 프롬프트 (After)

```python
당신의 임무:
학생이 "{next_step_goal}"를 스스로 깨닫도록 유도하는 짧은 질문 1개를 만드세요.

소크라테스식 질문 원칙:
1. 절대 금지: 함수명, 변수명, 코드 구조 언급
2. 학생 코드의 한계점을 확장된 상황으로 제시
3. "만약 ~라면?" 형식으로 문제 상황 가정
4. 학생이 불편함을 느끼고 해결책을 생각하게 만들기

질문 생성 방법:
- 현재 코드가 감당하기 어려운 상황 제시
- 규모가 커지면 어떻게 되는지 질문
- 반복/수정이 필요한 상황 강조

출력: 한국어 반말로 질문 1개만 (설명 없이):
```

**개선 사항:**
1. **모든 구체적 예시 제거** - "100번 복사", "1000개" 같은 숫자 예시 삭제
2. **추상적 원칙으로 대체** - "규모가 커지면", "반복/수정이 필요한 상황"
3. **방법론 제시** - 어떻게 질문을 만들지 설명 (예시 없이)
4. **출력 형식 강조** - "질문 1개만 (설명 없이)"

---

## 변경 이유

### 예시 제공의 문제점

1. **모델이 예시를 복사함**
   - 창의적 사고 차단
   - 비슷한 표현 반복

2. **컨텍스트 무시**
   - 사용자 코드와 무관한 예시 그대로 사용
   - "100번", "1000개" 같은 숫자가 모든 상황에 적합하지 않음

3. **일반화 실패**
   - 예시에 의존해서 다른 상황에 적응 못함

### 원칙 제시의 장점

1. **모델이 스스로 판단**
   - 사용자 코드에 맞는 질문 생성
   - 다양한 상황에 유연하게 대응

2. **추상적 사고 유도**
   - "규모가 커지면?" → 모델이 직접 구체화
   - 다양한 표현 가능

3. **과적합 방지**
   - 특정 예시에 의존하지 않음
   - 일반화된 질문 생성

---

## 기대 효과

### V4 힌트 (예시 의존)
```
"이상한 코드를 100번 쓰려고 하는데 어떤 대안을 고민하나요"
```
→ 프롬프트 예시 "100번"을 그대로 사용

### V5 힌트 (예상)
```
"체스판 크기가 더 커지면 모든 경우를 어떻게 확인할 건가?"
"같은 작업을 여러 위치에서 반복해야 한다면?"
"8x8 검사를 다른 곳에서도 써야 한다면?"
```
→ 사용자 코드와 문제 맥락에 맞는 자연스러운 질문

---

## 변경 위치

**파일:** [hint-system/app.py](../hint-system/app.py#L322-L344)

**함수:** `_create_analysis_prompt()`

**라인:** 322-344

---

## 테스트 필요

### 테스트 케이스

1. **체스판 문제 (#1018)**
   - 입력만 받은 코드 → 함수 정의 힌트
   - 기대: 구체적 예시 없이 자연스러운 질문

2. **A+B 문제 (#1000)**
   - 아무것도 없는 코드 → 입력 받기 힌트
   - 기대: "값을 어떻게 가져올까?" 같은 추상적 질문

3. **반복문 필요 문제**
   - 하드코딩된 코드 → 반복문 힌트
   - 기대: "개수가 바뀌면?" 같은 확장 상황 질문

---

## V1 → V5 변천사

| 버전 | 주요 변경 | 문제점 |
|------|-----------|--------|
| **V1** | 기본 프롬프트 | 함수명/변수명 언급 |
| **V2** | solution_code 제거, 나쁜 예시 추가 | 나쁜 예시를 따라함 |
| **V3** | 나쁜 예시 제거, snake_case 필터 추가 | 여전히 예시 의존 |
| **V4** | 진짜 소크라테스식 질문 방식 도입 | "질문 방식" 예시를 따라함 |
| **V5** | 모든 구체적 예시 제거, 추상적 원칙만 제시 | ✅ 해결 예상 |

---

## 결론

**핵심 원칙:** 모델에게 예시를 주지 말고, **어떻게 생각해야 하는지 원칙만** 알려주자.

- ❌ "100번 복사해야 한다면?" (구체적 예시)
- ✅ "규모가 커지면 어떻게 되는지 질문" (추상적 원칙)

모델이 사용자 코드를 직접 분석해서 맥락에 맞는 질문을 생성하도록 유도.

---

**작성일:** 2025-01-30
**버전:** V5
**이전 버전:** [PROMPT_FIX_V3.md](PROMPT_FIX_V3.md)
